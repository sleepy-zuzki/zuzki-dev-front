<article class="group h-full overflow-hidden rounded-2xl border border-black/10 dark:border-white/10 bg-surface-primary/60 flex flex-col focus-within:ring-2 focus-within:ring-ui-accent">
  <figure class="relative h-48 md:h-56 lg:h-60 w-full">
    @if (imageUrl) {
      <img [src]="imageUrl" class="absolute inset-0 w-full h-full object-cover" [alt]="'Imagen del proyecto ' + project.name">
      <div class="absolute inset-0 bg-gradient-to-b from-black/10 to-black/50"></div>
    } @else {
      <div class="absolute inset-0 bg-gradient-to-br from-zuzki-400 to-zuzki-600"></div>
    }

    @if (project.isFeatured) {
      <span class="absolute top-3 left-3 text-[11px] font-medium px-2.5 py-1 rounded-full bg-zuzki-500 text-white shadow-md">Destacado</span>
    }
    @if (project.category) {
      <span class="absolute top-3 right-3 text-[11px] font-medium px-2.5 py-1 rounded-full bg-black/30 text-white backdrop-blur border border-white/10">
        {{ project.category }}
      </span>
    }

    <div class="absolute left-4 bottom-4 text-white drop-shadow-md" aria-hidden="true">
      @if (project.year) {
        <p class="text-xs opacity-90">{{ project.year }}</p>
      }
      <app-typography-text as="p">{{ project.name }}</app-typography-text>
    </div>

    <figcaption class="sr-only">Banner visual del proyecto {{ project.name }}</figcaption>
  </figure>

  <div class="p-5 flex flex-col gap-4 grow">
    <header>
      <app-typography-title [level]="3" variant="card" align="left">{{ project.name }}</app-typography-title>
    </header>

    <app-typography-text as="p" variant="caption">{{ project.description }}</app-typography-text>

    <app-tags-list [tags]="tags"></app-tags-list>

    <nav class="mt-auto" aria-label="Acciones del proyecto">
      @if (isAdmin) {
        <div class="flex items-center gap-2">
          <button
            type="button"
            (click)="onEdit()"
            class="flex-1 inline-flex items-center justify-center gap-2 px-4 py-2 rounded-md bg-zuzki-500 text-white hover:bg-zuzki-600 focus:outline-none focus-visible:ring-2 focus-visible:ring-ui-accent"
            [attr.aria-label]="'Editar proyecto ' + project.name">
            Editar
          </button>
          <button
            type="button"
            (click)="onDelete()"
            class="px-2 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500"
            [attr.aria-label]="'Eliminar proyecto ' + project.name">
            <ng-icon name="bootstrapTrash" />
          </button>
        </div>
      } @else {
        <button
          type="button"
          (click)="openProjectModal(projectModal)"
          class="w-full inline-flex items-center justify-center gap-2 px-4 py-2 rounded-md bg-zuzki-500 text-white hover:bg-zuzki-600 focus:outline-none focus-visible:ring-2 focus-visible:ring-ui-accent"
          [attr.aria-label]="'Ver detalles del proyecto ' + project.name">
          Ver Detalles <ng-icon name="bootstrapArrowRightShort"></ng-icon>
        </button>
      }
    </nav>
  </div>
</article>


<app-project-info-modal #projectModal [project]="project"></app-project-info-modal>
