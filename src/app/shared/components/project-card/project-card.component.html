<app-card [interactive]="!isAdmin()" class="h-full block">
  <!-- Badges Slot -->
  <div slot="badges">
    @if (project().isFeatured) {
      <span class="project-card__badge project-card__badge--featured">Destacado</span>
    }
    <!-- Espaciador si solo hay uno -->
    <span></span> 
    @if (project().area) {
      <span class="project-card__badge project-card__badge--category">
        {{ project().area?.name }}
      </span>
    }
  </div>

  <!-- Image Slot -->
  <div slot="image" class="project-card__figure relative h-full w-full">
    @if (imageUrl()) {
      <img [ngSrc]="imageUrl()!" class="project-card__image" [alt]="'Imagen del proyecto ' + project().title" fill>
      <div class="project-card__gradient-overlay"></div>
    } @else {
      <div class="project-card__placeholder-bg h-full w-full"></div>
    }

    <!-- Glass Scrim (Año) - Elemento único de Proyectos -->
    @if (project().year) {
      <div class="project-card__glass-scrim">
        <p class="project-card__year">{{ project().year }}</p>
      </div>
    }
  </div>

  <!-- Content Slot -->
  <header>
    <app-typography-title [level]="3" variant="card" align="left">{{ project().title }}</app-typography-title>
  </header>

  <app-typography-text as="p" variant="caption" extraClasses="line-clamp-3 mb-4">{{ project().description }}</app-typography-text>

  <app-tags-list [tags]="tags()"></app-tags-list>

  <!-- Footer Slot -->
  <div slot="footer" class="w-full">
    <nav aria-label="Acciones del proyecto">
      @if (isAdmin()) {
        <div class="flex justify-between items-center gap-2">
          <div class="flex items-center gap-2">
            <app-button
              variant="secondary"
              size="sm"
              (click)="onEdit()"
              [ariaLabel]="'Editar proyecto ' + project().title">
              Editar
            </app-button>

            <app-button
              variant="secondary"
              size="sm"
              [routerLink]="['/dashboard/projects', project().slug, 'carousel']"
              [ariaLabel]="'Gestionar galería del proyecto ' + project().title">
              <ng-icon name="bootstrapImages" class="mr-1"></ng-icon> Galería
            </app-button>
          </div>

          <app-button
            variant="ghost"
            size="icon"
            (click)="onDelete()"
            [ariaLabel]="'Eliminar proyecto ' + project().title"
            class="text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20">
            <ng-icon name="bootstrapTrash" />
          </app-button>
        </div>
      } @else {
        <app-button
          variant="brand"
          size="md"
          [block]="true"
          (click)="openProjectModal(projectModal)"
          [ariaLabel]="'Ver detalles del proyecto ' + project().title">
          Ver Detalles <ng-icon name="bootstrapArrowRightShort"></ng-icon>
        </app-button>
      }
    </nav>
  </div>
</app-card>

<app-project-info-modal #projectModal [project]="project()"></app-project-info-modal>
