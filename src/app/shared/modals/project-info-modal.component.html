<app-modal [title]="project().title" size="xl">
  <section class="grid gap-6">
      @if (project().images.length > 0) {
        <div class="w-full min-w-0 overflow-hidden">
          <swiper-container
            slides-per-view="1"
            navigation="true"
            observer="true"
            observe-parents="true"
            pagination="false"
            style="--swiper-navigation-color: #fff; --swiper-pagination-color: #fff"
          >
            @for (img of project().images; track img.id; let i = $index) {
              <swiper-slide>
                <figure>
                  <img
                    [ngSrc]="img.url"
                    [alt]="project().title"
                    [priority]="i === 0"
                    class="m-auto rounded-md object-cover"
                    width="960"
                    height="572"
                  />

                  <figcaption class="mt-2 text-center">
                    <app-typography-text as="span" variant="caption" extraClasses="opacity-70">
                      Imagen {{ i + 1 }} de {{ project().images.length }} — {{ project().title }}
                    </app-typography-text>
                  </figcaption>
                </figure>
              </swiper-slide>
            }
          </swiper-container>
        </div>
      }
    <article class="project-details grid grid-cols-1 sm:grid-cols-2 gap-4">
      @if (project().description) {
        <section aria-labelledby="desc-title">
          <app-typography-title id="desc-title" [level]="3" variant="subsection">Descripción</app-typography-title>
          <app-typography-text variant="base" extraClasses="text-sm leading-relaxed">{{ project().description }}</app-typography-text>
        </section>
      }

      <div class="flex flex-col gap-4">
        <section class="grid gap-2 grid-cols-1" aria-labelledby="tech-title">
          <div>
            <app-typography-title id="tech-title" [level]="3" variant="subsection">Tecnologías</app-typography-title>
            @if (project().technologies.length) {
              <app-tags-list [tags]="projectTags()"></app-tags-list>
            } @else {
              <app-typography-text variant="muted" extraClasses="text-sm">No especificadas</app-typography-text>
            }
          </div>

          @if (project().area?.id || project().year || project().content) {
            <div aria-labelledby="details-title">
              <app-typography-title id="details-title" [level]="3" variant="subsection">Detalles</app-typography-title>
              @if (project().content) {
                <app-editor-renderer [data]="project().content || null"></app-editor-renderer>
              }
              <dl class="mt-2 grid grid-cols-[auto_1fr] gap-x-3 gap-y-1 text-sm">
                @if (project().year) {
                  <dt class="opacity-70">
                    <app-typography-text>Año:</app-typography-text>
                  </dt>
                  <dd>
                    <app-typography-text>{{ project().year }}</app-typography-text>
                  </dd>
                }
              </dl>
            </div>
          }
        </section>

        <nav class="mt-2 flex flex-wrap gap-3 justify-end" aria-label="Acciones">
          @if (project().liveUrl) {
            <a
              class="inline-flex items-center justify-center rounded-md bg-orange-500 px-4 py-2 text-white hover:bg-orange-600 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2"
              [href]="project().liveUrl"
              target="_blank"
              rel="noopener noreferrer"
              [attr.aria-label]="'Abrir demo de ' + project().title"
            >
              Ver demo
            </a>
          }
          @if (project().repoUrl) {
            <a
              class="inline-flex items-center justify-center rounded-md bg-neutral-700 px-4 py-2 text-white hover:bg-neutral-800 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2"
              [href]="project().repoUrl"
              target="_blank"
              rel="noopener noreferrer"
              [attr.aria-label]="'Abrir repositorio de ' + project().title"
            >
              <ng-icon name="featherGithub" class="mr-2"></ng-icon>
              Repositorio
            </a>
          }
        </nav>
      </div>
    </article>
  </section>
</app-modal>
